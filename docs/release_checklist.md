# 发版冒烟测试 Checklist

每次发版前手动执行以下测试，确保核心功能正常。

## 自动化测试

- [ ] `flutter analyze` 零错误
- [ ] `flutter test` 全部通过
- [ ] `./scripts/test_all.sh` 一键跑通

## 引导流程

- [ ] 首次启动显示引导页
- [ ] 麦克风权限请求正常
- [ ] 辅助功能权限请求正常
- [ ] 输入监控权限请求正常
- [ ] 默认模型自动下载

## 国际化 (i18n)

- [ ] 中文界面完整，无 key 泄露
- [ ] 英文界面完整，无 key 泄露
- [ ] 语言切换后界面即时刷新

## 模型管理

- [ ] 模型列表正确显示
- [ ] 模型下载进度条正常
- [ ] 下载完成后状态更新
- [ ] 切换活跃模型生效
- [ ] 已下载模型可删除

## 语音识别

- [ ] 快捷键按下开始录音（悬浮窗出现）
- [ ] 快捷键松开停止录音（悬浮窗消失）
- [ ] 离线模型：基本中文识别正确
- [ ] 文本成功注入到前台应用
- [ ] 去重功能工作正常

## 闪念笔记 (Diary)

- [ ] 笔记快捷键触发录音
- [ ] 识别结果保存到 Markdown 文件
- [ ] 文件名格式 `yyyy-MM-dd.md`
- [ ] 笔记内容格式 `- **[HH:mm:ss]** text`

## AI 纠错

- [ ] Cloud (OpenAI 兼容) 模式纠错正常
- [ ] Ollama 本地模式纠错正常
- [ ] 纠错禁用时直接输出原文
- [ ] API Key 缺失时优雅降级

## 断网场景

- [ ] 离线模型正常工作（无网络依赖）
- [ ] 云端 ASR 失败显示错误提示
- [ ] AI 纠错失败回退到原文

## 权限

- [ ] 缺少辅助功能权限时提示用户
- [ ] 缺少麦克风权限时提示用户
- [ ] 权限恢复后功能正常

## 设置页

- [ ] 快捷键更改生效
- [ ] ASR 引擎切换（离线/云端）
- [ ] LLM 配置保存/恢复
- [ ] 笔记目录配置
